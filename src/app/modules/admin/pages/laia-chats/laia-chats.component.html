<div class="container">
  <header>
    <span (click)="goBack()">X</span>
  </header>

  <div class="filters">
    <div class="filter">Integraciones</div>
    <div class="filter" [style.margin]="'0 8px'">Personalidad</div>
    <div class="filter">1 Memorias</div>
  </div>

  <main>
    <form class="search-bar-wrapper" style="margin-bottom: 10px">
      <input
        type="text"
        name="item-search"
        class="input search-bar"
        placeholder="Todos los Chats"
        [formControl]="itemSearchbar"
      />

      <div class="filters">
        <div class="option" [routerLink]="'/admin/benefits-control'">ðŸ’°</div>
      </div>
    </form>

    <ng-container *ngIf="chatsByMonthCopy?.length === 0">
      <ng-container *ngFor="let item of [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]">
        <ng-container *ngTemplateOutlet="emptyChat"
        ></ng-container>
      </ng-container>
    </ng-container>

    <ng-container *ngIf="chatsByMonthCopy?.length > 0">
      <section
        class="chat-grouped"
        *ngFor="let chatsByPeriod of chatsByMonthCopy"
      >
        <h3>{{ chatsByPeriod.month.label }}</h3>

        <div
          class="chat-card"
          (click)="goToChatDetail(chat)"
          *ngFor="let chat of chatsByPeriod.chats"
        >
          <div class="top">
            <h5>
              {{
                chat.receiver?.name ||
                  chat.receiver?.email ||
                  chat.receiver?.phone
              }}
            </h5>
            <span class="date">{{
              getCreationDateDifferenceAsItsSaid(chat.updatedAt)
            }}</span>
          </div>

          <p class="bottom">
            {{
              chat.lastMessageWritten
                ? chat.lastMessageWritten
                : "TodavÃ­a no han escrito nada"
            }}
          </p>
        </div>
      </section>
    </ng-container>
  </main>
</div>

<ng-template #chatCard>
  <div class="chat-card">
    <div class="top">
      <h5>ReceptorID</h5>
      <span class="date">HoraIDdeUltimoEscrito</span>
    </div>

    <p class="bottom">
      Lo Ãºltimo escritoID que irÃ¡ en dos lineas como wl WahtsApp
    </p>
  </div>
</ng-template>

<ng-template #emptyChat>
  <div class="empty-chat-card">
    <p class="text">
      ReceptorID
    </p>
  </div>
</ng-template>