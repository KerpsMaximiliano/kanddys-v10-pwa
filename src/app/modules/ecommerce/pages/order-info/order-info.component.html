<div class="container-v2" *ngIf="dateId">
  <app-helper-header
    *ngIf="showHeader"
    [basic]="false"
    [back]="true"
    middleTextTransform="uppercase"
    middleText="información de la orden"
    middleTextColor="#7B7B7B"
    middleTextFontFamily="SfProRegular"
    middleTextFontSize="17px"
    [bgcolor]="'transparent'"
    [searchAble]="false"
    (onClose)="back()"
  >
  </app-helper-header>
  <div class="provider-info-wrapper">
    <app-helper-headerv2
      mode="center"
      [mainText]="{
        text: 'Codigo: '+dateId
    }"
    ></app-helper-headerv2>
    <app-header-info
      [profileImage]="providerData.image"
      [title]="providerData.headline"
      [description]="
        name
          ? 'Vendió a '
          : ''
      "
      [description2]="'el '+date"
      [featuredText]="{ 'text': 
      isMerchantView ? name[0].toUpperCase() + name.substr(1).toLowerCase() + ' (' + phone + ')'
      : name[0].toUpperCase() + name.substr(1).toLowerCase(),
      'styles': '#2874AD' }"
      [route]="ruta"
      type="route"
      (featuredTextEvent)="redirectToUserContact()"
      (clickedImage)="redirectToMegaphone()"
    ></app-header-info>
  </div>

  <app-page-component-tabs
    [tabsOptions]="tabsOptions"
    (changeValue)="wichName($event)"
  ></app-page-component-tabs>
  <div class="content">
    <!-- ITEMS COMPRADOS VIEW -->
    <div class="list-items" *ngIf="view === 'comprado'">
      <ng-container *ngIf="!existPackage">
        <ng-container *ngFor="let item of items; let i = index">
          <div class="list-item">
            <ng-container
              *ngIf="item.item.images.length > 0; else elseTemplate"
            >
              <img
                [src]="item.item.images[0]"
                alt="no-image"
                class="image-item"
                (click)="openImageModal(item.item.images[0])"
              />
            </ng-container>
            <ng-template #elseTemplate>
              <div class="list-square"></div>
            </ng-template>

            <div class="list-item-content">
              <div class="item">
                <p class="title">{{ item.item.name }}</p>
                <p class="price" *ngIf="!existPackage">
                  <ng-container *ngIf="item.customizer?._id; else pricing">
                    ${{ price | number: "1.0-2" }}
                  </ng-container>
                  <ng-template #pricing> ${{ item.item.pricing | number: "1.0-2" }} </ng-template>
                  DOP
                </p>
                <div class="bottom">
                  <p class="b-text">
                    <!--AQUI IBAN LOS DUMMY TEXT, AQUI VA ALGO-->
                    Cantidad: {{ item.amount | number }}
                  </p>
                  <p class="b-text">
                    <!--AQUI IBAN LOS DUMMY TEXT, AQUI VA ALGO-->
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div *ngIf="items.length !== i + 1" class="line"></div>
        </ng-container>
      </ng-container>
      <ng-container *ngIf="existPackage">
        <div class="list-items">
          <div class="list-item">
            <img
              [src]="order.itemPackage.images[0]"
              alt="no-image"
              class="image-item"
              (click)="openImageModal(order.itemPackage.images[0])"
            />
            <div class="list-item-content">
              <div class="item">
                <p class="title">{{ order.itemPackage.name }}</p>
                <div class="bottom"></div>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
    <!-- ESCENARIOS VIEW -->
    <ng-container *ngIf="view === 'escenarios'">
      <ng-container *ngIf="itemsExtra.length > 0; else elseTemplate">
        <div class="squares">
          <ng-container *ngFor="let item of itemsExtra">
            <ng-container *ngIf="item.images.length > 0; else elseTemplate">
              <!-- <div [style.background-image]="'url(' + item.images[0] + ')'" [style.width.%]="100" [style.backgroundSize]="'cover'" [style.height.%]="100"></div> -->
              <img [src]="item.images[0]" alt="no-image" class="item-extra" />
            </ng-container>
            <ng-template #elseTemplate>
              <div class="square"></div>
            </ng-template>
          </ng-container>
        </div>
      </ng-container>
      <ng-template #elseTemplate>
        <div class="squares">
          <div class="square"></div>
          <div class="square"></div>
        </div>
        <div class="squares">
          <div class="square"></div>
          <div class="square"></div>
        </div>
      </ng-template>
    </ng-container>
    <!-- RESERVACION VIEW -->
    <ng-container *ngIf="view === 'reservacion'">
      <p class="top-text">Reservación</p>
      <div *ngIf="reservationItem" class="date-wrapper">
        <div class="date2">{{ reservationItem.description }}</div>
      </div>
    </ng-container>
    <!-- ADDRESS VIEW -->
    <ng-container *ngIf="view === 'address'">
      <ng-container *ngIf="!fotodavitte; else sesion"> <p class="top-text">Lugar de entrega:</p> </ng-container>
      <ng-template #sesion> <p class="top-text">Lugar de la sesión:</p> </ng-template>
      <div class="text-container">
        <ng-container *ngIf="order.items[0].deliveryLocation.city; else pickUp">
          {{ order.items[0].deliveryLocation.street }},
          {{ order.items[0].deliveryLocation.city }}, República Dominicana
        </ng-container>
        <ng-template #pickUp>
          {{ order.items[0].deliveryLocation.nickName }}
        </ng-template>
      </div>
      <ng-container *ngIf="order.items[0].deliveryLocation.note">
        <div class="target">
          <p class="top-text" style="margin-top: 24px;">Nota:</p>
          <div class="text-container" style="margin-bottom: 60px">
            {{ order.items[0].deliveryLocation.note }}
          </div>
        </div>
      </ng-container>
    </ng-container>
    <!-- CUSTOMIZER VIEW -->
    <div class="content-customizer" *ngIf="view === 'personalizacion' && customizer">
      <table>
        <tr *ngFor="let detail of customizerDetails">
          <th>{{detail.name}}</th>
          <td>{{detail.value}}</td>
        </tr>
      </table>
      <div class="img-container" *ngIf="customizer.preview">
        <img class="img" [src]="customizer.preview" alt="" />
      </div>
    </div>
    <!-- MENSJE VIEW -->
    <ng-container *ngIf="view === 'mensajeRegalo' && isValidMessage">
      <app-gift-message
        [data]="message"
        [isPreview]="true"
        [message]="message.message"
      ></app-gift-message>
    </ng-container>
    <!-- PAGOS VIEW -->
    <ng-container *ngIf="view === 'pago'">
      <div class="payment-list">
        <div class="payment-card">
          <div class="price">
            <p class="total" *ngIf="price">${{ price | number: "1.0-2" }}</p>
          </div>
          <p class="payment-type">Total Facturado en DOP</p>
        </div>
        <div class="payment-card">
          <div class="price">
            <p class="total" *ngIf="totalPayed">${{ totalPayed | number: "1.0-2" }}</p>
          </div>
          <p class="payment-type">Total Pagado en DOP</p>
        </div>
      </div>
      <h3 class="payments-title">Pagos realizados</h3>
      <div *ngFor="let item of ocrPayments">
        <app-item-status [itemListContent]="item"></app-item-status>
      </div>
    </ng-container>
  </div>
</div>
