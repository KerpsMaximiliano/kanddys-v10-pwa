<div class="container" [formGroup]="itemFormData">
  <div class="header">
    <div class="flex">
      <mat-icon style="cursor: pointer" (click)="back()">close</mat-icon>
      <p class="header-title">
        {{ itemsService.temporalItemInput?.name }} para cotizar y vender
        localmente
      </p>
    </div>
    <img
      [src]="
        !showIntroParagraph
          ? assetsFolder + '/icon_info.png'
          : assetsFolder + '/dropdown_icon.png'
      "
      (click)="showIntroParagraph = !showIntroParagraph"
    />
  </div>
  <div class="content">
    <div class="content-title" *ngIf="showIntroParagraph">
      Esta plataforma te pone al frente de floristas que necesitan exactamente
      lo que ofreces. Cada vez que un florista de tu localidad busque flores, tu
      producto y precio se mostrarán, facilitando transacciones rápidas y
      eficientes. Tu trabajo será simplemente mantener actualizada la
      información del producto y el inventario. Recibirás las órdenes según
      <strong> tu promesa. </strong>
    </div>

    <input
      type="file"
      id="file"
      [style.display]="'none'"
      (change)="loadFile($event)"
      multiple
      [accept]="[
        '.png',
        '.jpg',
        '.jpeg',
        '.webp',
        '.webm',
        '.mp4',
        '.m4v',
        '.mpg',
        '.mpeg',
        '.mpeg4',
        '.mov',
        '.3gp',
        '.mts',
        '.m2ts',
        '.mxf'
      ]"
    />

    <div class="content-image-container" *ngIf="itemSlides.length === 0">
      <label for="file" class="itemContainer add" [style.cursor]="'pointer'">
        <div class="img-input">
          <img [src]="assetsFolder + '/galery-black.svg'" alt="icon" />
        </div>
      </label>
    </div>

    <div class="field-text" *ngIf="itemFormData.controls['title'].value">
      <label for="">Texto principal y centralizado</label>

      <span class="text">{{ itemFormData.controls["title"].value }}</span>
    </div>

    <div>
      <div
        class="field-text"
        *ngIf="itemFormData.controls['description'].value"
        style="padding-bottom: 40px"
      >
        <label for="">Texto más largo</label>

        <span class="text">{{
          itemFormData.controls["description"].value
        }}</span>
      </div>
    </div>

    <div
      class="content-image-container"
      *ngIf="
        itemSlides.length > 0 &&
        quotationsService.supplierItemsAdjustmentsConfig?.quotationItemBeingEdited
      "
    >
      <ng-container *ngIf="isVideoWrapper(itemSlides[0].url); else images">
        <div class="item-card" style="background-color: black">
          <img
            src="https://storage-rewardcharly.sfo2.digitaloceanspaces.com/new-assets/playIcon.svg"
            alt="play"
            (click)="playVideoOnFullscreen('media0')"
            class="playVideoIcon"
            style="
              padding: 1.5rem !important;
              z-index: 99;
              z-index: 99;
              left: 0;
              right: 0;
              max-width: 80px;
              min-width: 70px;
            "
          />

          <video
            class="video-content"
            [id]="'media0'"
            [muted]="true"
            [src]="itemSlides[0].url"
          ></video>
        </div>
      </ng-container>

      <ng-template #images>
        <div
          class="item-card"
          [ngStyle]="{
            backgroundImage: itemSlides[0].url
              ? 'url(' + itemSlides[0].url + ')'
              : 'url(/assets/images/noimage.png)',
            backgroundRepeat: 'no-repeat',
            backgroundPosition: 'center',
            backgroundSize: 'cover'
          }"
        ></div>
      </ng-template>
    </div>

    <div
      class="added-slides"
      *ngIf="
        itemSlides.length > 0 &&
        renderQrContent &&
        !quotationsService.supplierItemsAdjustmentsConfig
          ?.quotationItemBeingEdited
      "
    >
      <app-qr-content
        [slides]="itemSlides"
        [showReorderButton]="true"
        [title]="'Slides visuales'"
        [mode]="'SMALL'"
        [editing]="false"
        [defaultText]="'Incluyes fotos, memes, videos o música.'"
        (buttonClicked)="
          !updateItem ? emitFileInputClick() : goToReorderMedia()
        "
        (buttonClicked2)="goToReorderMedia()"
      ></app-qr-content>
    </div>

    <div
      class="price-wrapper"
      [ngClass]="{
        'no-shadows': itemFormData.controls['pricing'].value !== 0
      }"
    >
      <app-currency-input
        [innerLabel]="'Precio*'"
        [innerLabelStyles]="{
          fontFamily: 'InterLight',
          fontStyle: 'italic',
          fontSize: '13px'
        }"
        [fieldStyles]="{
          boxShadow: 'none',
          backgroundColor: 'white',
          borderRadius: '6px',
          padding: '8px 0px'
        }"
        [initialValue]="itemFormData.controls['pricing'].value"
        (onInputEvent)="updateItemPrice($event)"
        placeholderColor="#7B7B7B"
        currencyLabel=""
      ></app-currency-input>
    </div>

    <div
      class="content-inventary-container"
      [ngClass]="{
        'no-shadows': itemFormData.controls['stock'].value
      }"
      (click)="openFormForField()"
    >
      <p>Inventario*</p>
      <input placeholder="0" type="number" formControlName="stock" />
      <p class="content-inventary-detail">
        No se está mostrando a Floristerias
      </p>
    </div>

    <!--
      <p class="content-optionals-fuctions">FUNCIONALIDADES OPCIONALES</p>
      <div class="content-optional-function">
        <p>Costo para el control de beneficios</p>
        <mat-icon>add_circle</mat-icon>
      </div>
    -->
  </div>
</div>

<footer
  [ngClass]="{
    updateMode: updateItem || merchantRegistration
  }"
  *ngIf="itemFormData?.valid && itemSlides.length > 0"
>
  <button class="right" style="color: #272727" (click)="saveItem()">
    Guardar
  </button>
</footer>
