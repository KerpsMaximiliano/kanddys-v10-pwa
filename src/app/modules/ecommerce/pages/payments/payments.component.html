<div class="container">
  <header class="header">
    <button (click)="onBackClick()" class="back-btn">
      <img [src]="env + '/double-arrow-up.png'" alt="open info" />
    </button>
    <h1 class="method">Métodos de Pagos</h1>
  </header>

  <div class="payment-method" *ngIf="status === 'complete'">
    <div class="order-amount" *ngIf="order">
      <div class="amount-wrapper">
        <h4 class="title">Subtotal</h4>
        <h3 class="price">${{ paymentAmount | number: "1.2-2" }}</h3>
      </div>
      <div class="amount-wrapper">
        <h4 class="title">A saldar</h4>
        <h3 class="price">${{ paymentAmount | number: "1.2-2" }}</h3>
      </div>
    </div>

    <div class="amount-input" *ngIf="!order">
      <span class="payment-selection"> Monto del depósito </span>
      <div style="height: 64px">
        <app-currency-input
          (onInputEvent)="depositAmount = $event"
        ></app-currency-input>
      </div>
    </div>
    <span class="payment-selection"> Como prefieres pagar?</span>
    <ng-container *ngIf="!selectedBank">
      <app-answer-selector
        [values]="{
          type: 'bank',
          items: banks
        }"
        [activeOption]="selectedOption"
        [indicator]="true"
        (onSelector)="selectBank($event)"
        [containerStyles]="{
          margin: '0px',
          marginTop: '19px'
        }"
      ></app-answer-selector>
    </ng-container>
    <app-answer-selector
      *ngIf="!selectedBank"
      [complexOptions]="onlinePaymentsOptions"
      [hasComplexOptionsLayout]="true"
      [indicator]="true"
      (onSelector)="selectOnlinePayment($event)"
      [containerStyles]="{
        margin: '-20px 0px 0px 0px'
      }"
    >
    </app-answer-selector>
    <ng-container *ngIf="selectedBank">
      <div class="option-content">
        <p class="option-title">Transferencia Bancaria</p>
        <ul>
          <li>Tipo de cuenta: {{ selectedBank.typeAccount }}</li>
          <li>{{ selectedBank.ownerAccount }}</li>
          <li>Cuenta: {{ selectedBank.account }}</li>
          <li *ngIf="selectedBank.routingNumber">
            RNC: {{ selectedBank.routingNumber }}
          </li>
        </ul>
        <p class="option-footer">{{ selectedBank.bankName }}</p>
        <button class="option-remove" (click)="removeBank()">X</button>
      </div>
    </ng-container>
  </div>
  <div class="image-area" *ngIf="selectedBank">
    <label for="Image" class="image-label">Comprobante de Pago</label>
    <app-image-input
      style="margin-left: 5px"
      [allowedTypes]="['png', 'jpg', 'jpeg']"
      [expandImage]="true"
      (onFileInput)="onFileInput($event)"
      [containerStyles]="{
        width: '100%'
      }"
      [fileStyles]="{
        width: '100%',
        backgroundColor: 'white !important',
        boxShadow: 'rgb(0 0 0 / 18%) 1px 6px 8px 0px inset',
        border: 'none'
      }"
    ></app-image-input>
  </div>
  <app-sticky-button
    *ngIf="selectedBank && (order || (!order && depositAmount > 0))"
    (click)="!disableButton && image && submitPayment()"
    [mode]="!disableButton ? 'fixed' : 'disabled-fixed'"
    [text]="
      image
        ? 'SALVAR EL PAGO & FACTURAR'
        : selectedBank
        ? 'SUBE LA IMAGEN QUE EVIDENCIA EL PAGO'
        : ''
    "
    [size]="'small'"
    [bgColor]="image ? '#2874AD' : '#A1A1A1'"
    [customLeftButtonStyles]="{
      'letter-space': '1px',
      'font-family': 'RobotoMedium',
      'font-size': '17px',
      color: '#FFFFFF'
    }"
  ></app-sticky-button>
</div>
