<div class="container">
  <header class="header">
    <div style="display: flex; align-items: center">
      <button (click)="onBackClick()" class="back-btn"><i class="fas fa-chevron-left"></i></button>
      <h1 class="method">Métodos de Pagos</h1>
    </div>

    <div class="right-area">
      <span class="header-text" *ngIf="order">{{
        currentUser?.name || currentUser?.phone || currentUser?.email
      }}</span>
      <img
        [src]="env + '/person.svg'"
        alt="Icono de una persona"
        *ngIf="order?.user"
      />
    </div>
  </header>

  <div class="payment-method" *ngIf="status === 'complete'">
    <div class="total-paid" *ngIf="order">
      <h1 class="paid">${{ paymentAmount | number: "1.2-2" }}</h1>
      <p class="total">Total Facturado en DOP</p>
    </div>
    <div class="amount-input" *ngIf="!order">
      <span class="payment-selection"> Monto del depósito </span>
      <div style="height: 64px">
        <app-currency-input
          (onInputEvent)="depositAmount = $event"
        ></app-currency-input>
      </div>
    </div>
    <span class="payment-selection"> Selecciona el que te convenga: </span>
    <ng-container *ngIf="!selectedBank">
      <app-answer-selector
        [values]="{
          type: 'bank',
          items: banks
        }"
        [activeOption]="selectedOption"
        [indicator]="true"
        (onSelector)="selectBank($event)"
        [containerStyles]="{
          margin: '0px'
        }"
      ></app-answer-selector>
    </ng-container>
    <ng-container *ngIf="selectedBank">
      <div class="option-content">
        <p class="option-title">Transferencia Bancaria</p>
        <ul>
          <li>Tipo de cuenta: {{ selectedBank.typeAccount }}</li>
          <li>{{ selectedBank.ownerAccount }}</li>
          <li>Cuenta: {{ selectedBank.account }}</li>
          <li *ngIf="selectedBank.routingNumber">
            RNC: {{ selectedBank.routingNumber }}
          </li>
        </ul>
        <p class="option-footer">{{ selectedBank.bankName }}</p>
        <button class="option-remove" (click)="removeBank()">X</button>
      </div>
    </ng-container>
  </div>
  <div class="image-area" *ngIf="selectedBank">
    <label for="Image" class="image-label">Comprobante de Pago</label>
    <app-image-input
      style="margin-left: 5px"
      [allowedTypes]="['png', 'jpg', 'jpeg']"
      [expandImage]="true"
      (onFileInput)="onFileInput($event)"
    ></app-image-input>
  </div>
  <app-sticky-button
    *ngIf="selectedBank && (order || (!order && depositAmount > 0))"
    (click)="!disableButton && image && submitPayment()"
    [mode]="!disableButton ? 'fixed' : 'disabled-fixed'"
    [text]="
      image
        ? 'SALVAR EL PAGO & FACTURAR'
        : selectedBank
        ? 'SUBE LA IMAGEN QUE EVIDENCIA EL PAGO'
        : ''
    "
    [size]="'small'"
    [bgColor]="image ? '#2874AD' : '#A1A1A1'"
    [customLeftButtonStyles]="{
      'letter-space': '1px',
      'font-family': 'RobotoMedium',
      'font-size': '17px',
      color: '#FFFFFF'
    }"
  ></app-sticky-button>
</div>
