<div class="container">
	<app-helper-headerv2
		[mode]="'basic'"
		[navtext]="item?.merchant?.name"
		[returnAble]="false"
		[whatsapp]="!providerView"
		[shopcart]="!providerView"
		[cartAmount]="1"
		cartColor="blue"
		fontSize2="21px"
		filter="brightness(0) saturate(100%) invert(40%) sepia(22%) saturate(1544%) hue-rotate(163deg) brightness(95%) contrast(92%)"
		[bgColor]="providerView ? '#2874AD' : '#E9E371'"
		[color]="providerView ? '#FFFFFF' : '#2874AD'"
		(returnEvent)="redirect()"
	></app-helper-headerv2>

	<!-- Info que ve el admin (merchant) del producto -->
	<ng-container *ngIf="isOwner">
		<!-- <app-header-info-admin [data]="[{
				text: {
					content: '$147,154 DOP total ingresado',
					color: '#2874AD'
				}
			},
			{
				text: {
					content: '1,457 ventas',
					color: '#2874AD'
				}
			}]"></app-header-info-admin>

		<div class="category">
			<div class="tab-area">
				<div class="tab" [ngClass]="{colored: tapped}" (click)="tapping()">
					<img
						[src]="env + '/expand-categories.svg'"
						alt="Lista para expandir categorías"
						width="18px"
						height="15px"
						class="icon"
					>
					<p class="tab-text" [ngStyle]="{color: tapped? '#E9E371':'#2874AD'}">Categorías</p>
				</div>
			</div>

			<ng-container *ngIf="tapped">
				<div class="tags-area" *ngIf="categories">
					<app-tags-square *ngFor="let item of categories; index as i"
						[tagText]="item.name"
						gains="44 Ventas"
						[reverse]="true"
						color="#2874AD"
						textColor="#2874AD"
						position="left"
					></app-tags-square>
				</div>
			</ng-container>
		</div> -->
	</ng-container>

	<!-- Fin de la info que ve el admin -->

	<div class="item-info" *ngIf="item">
		<div class="description" *ngIf="item.description">
			<h2 class="title-name" *ngIf="item.name && item.images?.length">
				{{item.name}}
			</h2>
			<p>{{item.description}}</p>

			<!-- <hr *ngIf="!item.images && (item.name || item.pricing)" class="divider"> -->
		</div>

		<div *ngIf="item.name && (!item.images || !item.images?.length)">
			<div class="grey-box">
				<h3 class="title">{{item.name}}</h3>
			</div>
		</div>

		<button *ngIf="item.images?.length" class="itemImg" (click)="openImageModal(item.images[0])">
			<div [ngStyle]="{ 'background-image': 'url(' + item.images[0] + ')' }"></div>
		</button>

		<div class="no-description" *ngIf="item.name && !item.description && item.images">
			<h3 class="title">{{item.name}}</h3>
		</div>

		<div *ngIf="item.pricing" class="item-price">
			<span class="vale">Vale</span>
			<h4 class="price">${{item.pricing | number}}</h4>
		</div>

		<!-- <div class="flex-box" *ngIf="providerView">
			<h3 class="title">{{ item.name }}</h3>
			<div>
				<p class="gray-label">RD$ {{ item.pricing | number }}</p>
				<p class="gray-label">Ganas 14★</p>
			</div>
		</div> -->

		<div class="client-submit-area">
			<ng-container *ngIf="!providerView">
				<button class="action-btn yellow">Adicionar al <span><img src="{{ env }}/carrito_blanco.svg" alt=""></span></button>
				<img src="{{ env }}/bookmark-plus.svg" alt="">
			</ng-container>
			<ng-container *ngIf="providerView">
				<button class="action-btn" [ngClass]="{'yellow': item.status === 'active', 'blue': item.status === 'disabled'}" (click)="toggleActivateItem()">
					<ng-container *ngIf="item.status === 'active'">ACTIVO Y EN VENTA</ng-container>
					<ng-container *ngIf="item.status === 'disabled'">EMPEZAR A VENDERLO</ng-container>
				</button>
				<a class="side-btn" [routerLink]="['/ecommerce/category-item-detail',item._id]">
					<img src="{{ env }}/categories-list.svg" width="30" height="30" alt="">
					<span [ngClass]="{'plus': !item.category.length}">{{item.category.length ? item.category.length : '+'}}</span>
				</a>
			</ng-container>
		</div>

		<ng-container *ngIf="item.content?.length">
			<hr class="divider">
			<div class="content">
				<span class="includes">Incluye:</span>
				<ul>
					<li *ngFor="let content of item.content; index as i" class="list-content">
						- {{content}}
					</li>
				</ul>
			</div>
		</ng-container>
	</div>

</div>

<ng-container *ngIf="providerView">
	<ng-container *ngIf="mode === 'new-item'">
		<app-bubble-button [position]="'left'" [text]="'TIENDA'" [solo]="false" (click)="toggleView()"></app-bubble-button>
		<app-bubble-button [position]="'right'" [text]="'VISTA'" [solo]="false" (click)="toggleView()"></app-bubble-button>
		<app-sticky-button
			[bgColor]="'#2874AD'"
			[text]="!newMerchant ? 'EMPIEZA A VENDERLO' : 'CUENTA DONDE PAGARAN'"
			mode="fixed"
			(click)="!loggedIn && !newMerchant? goToAuth() : (newMerchant && canCreateBank) ? goToBanksForm() : loggedIn && defaultMerchant ? goToMerchantStore() : null">
		</app-sticky-button>
	</ng-container>
	<ng-container *ngIf="mode === 'edit'">
		<app-bubble-button [position]="'left'" [icon]="env + '/arrow-left.svg'" [solo]="false" [routerLink]="['/ecommerce/user-items']"></app-bubble-button>
		<app-bubble-button [position]="'right'" [icon]="env + '/upload.svg'" [solo]="false" (click)="openShareDialog()"></app-bubble-button>
		<app-sticky-button
			*ngIf="totalByItem && buyersByItem"
			[bgColor]="'#2874AD'"
			[text]="totalByItem?.itemInOrder + ' VENTAS / $' + totalByItem?.total + ' IN / ' + buyersByItem?.length + ' COMPRADORES'"
			mode="fixed"
			size="small"
			color="#E9E371"
			[routerLink]="['/ecommerce/item-sales-detail', item._id]"
		></app-sticky-button>
	</ng-container>
</ng-container>

<ng-container *ngIf="!providerView">
	<app-bubble-button [position]="'left'" [return]="true" (click)="toggleView()"></app-bubble-button>
	<app-bubble-button [position]="'right'" [icon]="'/upload.svg'"  (click)="toggleView()"></app-bubble-button>
	<app-sticky-button
		[text]="'TOCA DONDE PREFIERAS'"
		[mode]="'disabled-fixed'"
		size="small"
	></app-sticky-button>
</ng-container>