<!-- <app-navigation [opened]="openNavigation" (closed)="openNavigation = false"> -->
  <div class="container">
    <div class="header-wrapper">
      <div class="left-part">
        <div class="title" *ngIf="showGanas === false">
          <p (click)="openMsgDialog()">La<span style="color: #87CD9B;">ia</span>Chat</p>
          <span (click)="!headerService.user ? loginflow = true : showRoleDialog()" style="color: #87CD9B;">
            {{ 
              !headerService?.user ?
              'para miembros de www.flores.club' :
              headerService.user.name ?
              'de ' + headerService.user.name :
              headerService.user.email ?
              'de ' + truncateString(headerService.user.email) :
              headerService.user.phone ?
              'de ' + headerService.user.phone :
              'para miembros de www.flores.club'
            }}
          </span>
        </div>
      </div>
  
      <div class="right-part">
        <div class="close" *ngIf="showGanas === true" (click)="showGanas = false">
          X
        </div>
        <div *ngIf="headerService.user && showGanas === false" class="icon" (click)="showGanas = true">
            <p>Gana$</p>
            <mat-icon>ios_share</mat-icon>
        </div>
      </div>
    </div>
    <main>
      <div class="tab-header" *ngIf="showGanas===true">
        <div class="info-container">
          <p class="info-container-title">Gana Dinero</p>
          <div class="flex-space-between">
            <p class="info-container-icon">ü§ë</p>
            <div>
              <p class="info-container-desc">
                Por cada factura que generen tus invitados comerciales ganas
                dinero. Es un ingreso recurrente y sin l√≠mites.
              </p>
              <p class="info-container-invited-link" (click)="goToReferrals()">
                {{
                  !headerService.user
                    ? "Mira tus invitados"
                    : referralsCount
                    ? referralsCount + " invitados"
                    : "0 invitados"
                }}
              </p>
            </div>
          </div>
        </div>
        <p class="ganas-desc center">
          Del dinero recolectado cada mes para mantener a Laia, TU como Embajador
          ganas el 15% de cada comercio invitado directo y el 10% de todos los
          indirectos*
        </p>
        <p class="ganas-desc ganas-desc-ad">
          *Comercios que invitaron a quienes invitaste.
        </p>
        <hr />
        <div class="info-container">
          <p class="info-container-title">Ahorra Tiempo</p>
          <div class="flex-space-between">
            <img
              width="70px"
              height="70px"
              src="../../../../../assets/images/sand-clock.png"
              alt=""
            />
            <div>
              <p class="info-container-desc">
                Ahorra el tiempo de cotizaciones y facturas cuando tus clientes y
                proveedores utilizan a LaiaChat.
              </p>
              <p class="info-container-invited-link" (click)="goToReferrals()">
                {{
                  !headerService.user
                    ? "Mira tus invitados"
                    : referralsCount
                    ? referralsCount + " invitados"
                    : "0 invitados"
                }}
              </p>
            </div>
          </div>
        </div>
      </div>
      <!--
      <div class="footer-swiper" *ngIf="tabarIndex === 0">
        <div class="slide-item borderless">
          <div class="flex">
            <div class="image">
              <img width="80px" src="../../../../../assets/images/laia.png" alt="" />
            </div>
            <div class="info">
              <div class="name">La<span>ia</span></div>
              <div class="role">
                Asistente Virtual que utiliza Inteligencia Artificial
              </div>
            </div>
          </div>
        </div>
      </div>-->
      <div class="tab-header" *ngIf="showGanas === false">
        <div class="info-container">
          <div class="info-container-title-container">
            <p class="info-container-title">Vende f√°cilmente </p>
            <input id="imgInput" accept="image/*" type="file" (change)="getImg($event)" hidden #uploader>
            <div *ngIf="headerService.user">
              <mat-slide-toggle
                [checked]="statusSwitch"
                (click)="toggleStoreVisibility()"
              ></mat-slide-toggle>
              <p (click)="uploader.click()">+</p>
              <mat-icon (click)="shareDialog(true)">ios_share</mat-icon>
            </div>
          </div>
          <p class="info-container-desc info-container-desc-mt">
            Laia crear√° una vitrina online para vender tus art√≠culos a trav√©s de enlaces.
          </p>
          <ng-container *ngIf="!headerService?.user">
            <p class="info-container-invited-link info-container-invited-link-mr" (click)="uploader.click()">
              Agrega tu primer art√≠culo
            </p>
          </ng-container>
          <div class="link-container" *ngIf="headerService?.user">
            <p class="info-container-invited-link info-container-invited-link-mr" (click)="goToDashboard()">
              {{ saleflow ? saleflow?.items?.length : '0' }} art√≠culos
            </p>
            <p class="info-container-invited-link info-container-invited-link-mr" (click)="goToOrders()">
              {{ sales ? sales : '0' }} ventas
            </p>
            <!-- <p class="info-container-invited-link info-container-invited-link-mr">
              Facturar
            </p> -->
          </div>
        </div>
        <ng-container *ngIf="headerService.user">
          <div class="flex-space-between align-center">
            <p *ngIf="paymentSwitch" class="ganas-desc ">
              El comprador paga US$0.30 a La<span>ia</span>.
            </p>
            <p *ngIf="!paymentSwitch" class="ganas-desc ">
              Pagar√°s a La<span>ia</span> US$0.30 por cada venta.
            </p>
            <mat-slide-toggle
              class="toggle"
              [checked]="paymentSwitch"
              (change)="paymentSwitch = !paymentSwitch"
            ></mat-slide-toggle>
          </div>
          <p class="ganas-desc left">
            Tus articulos se exhibir√°n 
            <span (click)="openExhibitDialog()">
              {{this.merchantRole?.code === 'PRODUCTOR' ?
                'a fincas' :
                this.merchantRole?.code === 'PROVIDER' ?
                'a florister√≠as' :
                this.merchantRole?.code === 'SUPPLIER' ?
                'a wholesalers' : 'al consumidor final'
              }}.
            </span>
          </p>
          <hr />
        </ng-container>
        <div class="info-container">
          <p class="info-container-title">Ahorra tiempo en Responder</p>
          <p class="info-container-desc info-container-desc-mt">
            Laia utiliza la IA para formular respuestas seg√∫n el contenido que
            adiciones a sus memorias.
          </p>
          <div class="flex">
            <p
              class="info-container-invited-link info-container-invited-link-mr"
              (click)="goToLaiaTraining()"
              *ngIf="!headerService?.user"
            >
              Escribe en la Memoria
            </p>
            <div *ngIf="headerService.user" class="memory-options">
              <p 
                class="info-container-invited-link info-container-invited-link-mr"
                (click)="goToAIMemoriesManagement()"
              >
                {{ vectorsCount }} memorias
              </p>
              <p 
                class="info-container-invited-link info-container-invited-link-mr"
                (click)="goToChatsManagement()"
              >
                {{ chatsCount }} chats
              </p>
            </div>
          </div>
        </div>
        <p 
          class="ganas-desc center" 
          style="cursor: pointer" 
          (click)="goToWizard()"
          *ngIf="headerService?.user"
        >
          Responde desde tu propio <span>WhatsApp</span>.
        </p>
        <hr />
        <div class="info-container">
          <p class="info-container-title">Compras √°giles</p>
          <p class="info-container-desc info-container-desc-mt">
            Crea y comparte carritos (ordenes de compras) para ahorrarte tiempo.
          </p>
          <div class="flex">
            <p class="info-container-invited-link info-container-invited-link-mr" (click)="buttonHandler()">
              Selecciona los art√≠culos que necesitas
            </p>
          </div>
        </div>
        <ng-container *ngIf="headerService.user">
          <p class="ganas-desc left">
            Laia te presenta articulos y ofertas de 
            <span>
              las fincas.
            </span>
          </p>
          <hr />
        </ng-container>
        <ng-container *ngIf="!headerService?.user">
        <div class="info-container">
          <p class="info-container-title">Premia las Referencias</p>
          <div class="container-flex">
            <img src="../../../../../assets/images/gift.png" alt="">
            <p class="info-container-desc info-container-desc-mt">
              Alcanza m√∫ltiples comunidades. Incentiva a tus Embajadores a que promocionen y vendan tus art√≠culos.
            </p>
          </div>
          <!--<div class="flex-space-between">
            <ng-container *ngIf="!headerService?.user">
              <p class="info-container-invited-link info-container-invited-link-mr" (click)="openMemoriesLoginDialog()">
                Adiciona tu primer articulo
              </p>
            </ng-container>
            <ng-container *ngIf="headerService?.user">
              <p class="info-container-invited-link info-container-invited-link-mr" (click)="goToDashboard()">
                {{ saleflow ? saleflow?.items?.length : '0' }} art√≠culos activados
              </p>
            </ng-container>
          </div>-->
        </div>
        
        <div class="info-container">
          <p class="info-container-title">Incrementa la Urgencia</p>
          <div class="container-flex">
            <img src="../../../../../assets/images/alert.png" alt="">
            <p class="info-container-desc info-container-desc-mt">
              Crea ofertas. Motiva las compras con precios exclusivos que duran solo 24 horas.
            </p>
          </div>
          <div class="flex-space-between">
            <!--<ng-container *ngIf="!headerService?.user">
              <p class="info-container-invited-link info-container-invited-link-mr" (click)="openMemoriesLoginDialog()">
                Adiciona tu primer articulo
              </p>
            </ng-container>-->
            <ng-container *ngIf="headerService?.user">
              <p class="info-container-invited-link info-container-invited-link-mr" (click)="goToDashboard()">
                {{ saleflow ? saleflow?.items?.length : '0' }} art√≠culos activados
              </p>
            </ng-container>
          </div>
        </div>
        <div class="info-container">
          <p class="info-container-title">Premia Porque Si!</p>
          <div class="container-flex">
            <img src="../../../../../assets/images/star.png" alt="">
            <p class="info-container-desc info-container-desc-mt">
              A qui√©n no le gusta los premios? Premia a quienes quieras hacer sentir bien para atraerlo a tu comercio.
            </p>
          </div>
          <div class="flex-space-between">
            <p class="info-container-invited-link "
              (click)="buttonHandler()"
            >
              Sin Memorias
            </p>
          </div>
        </div>
        <div class="info-container">
          <p class="info-container-title">Premia las Menciones</p>
          <div class="container-flex">
            <img src="../../../../../assets/images/megaphone.png" alt="">
            <p class="info-container-desc info-container-desc-mt">
              P√∫blica tu marca en m√∫ltiples comunidades. Incentiva a tus Embajadores a que te mencionen en sus propias redes sociales.
            </p>
          </div>
          <div class="flex-space-between">
            <p class="info-container-invited-link "
              (click)="buttonHandler()"
            >
              Sin memorias
            </p>
          </div>
        </div>
        <p class="ganas-desc center">
          Participantes pueden subir <img alt="foto" src="{{assetsFolder}}/grey-camera.png"> de la menci√≥n para los casos de cuentas privadas.
        </p>
        <hr />
        <div class="info-container">
          <p class="info-container-title">Recompensa las Compras</p>
          <div class="container-flex">
            <img src="../../../../../assets/images/heart.png" alt="">
            <p class="info-container-desc info-container-desc-mt">
              Fideliza a tus compradores. Convierte a tus compradores regulares en compradores recurrentes.
            </p>
          </div>
          <div class="flex-space-between">
            <p class="info-container-invited-link info-container-invited-link-mr" (click)="openMemoriesLoginDialog()">
              Adiciona tu primer recompensa
            </p>
          </div>
        </div>
        <p  class="ganas-desc center">
          Compradores puede subir <img alt="foto" src="{{assetsFolder}}/grey-camera.png"> de su factura para empezar el programa.
        </p>
        </ng-container>
      </div>
    </main>
    <!-- <div 
      class="message"
      *ngIf="showGanas === false"
    >
      <div 
        [ngClass]="{ 'loggedout': !headerService.user }"
        class="input" 
        (click)="openLaiaDialog()"
      >
        {{headerService.user ? 'Como te ayudar√≠a Laia (la IA)?' : 'Mensaje'}}
        <img
          class="audio-freq"
          src="{{assetsFolder}}/audio-freq.png"
          [ngClass]="{ 'brighter': headerService.user }"
          alt="img"
        >
      </div>
        <img
          alt="arrow"
          class="arrow"
          src="{{assetsFolder}}/transparent-arrow-up.png"
        >
    </div> -->

    <!-- <footer
      *ngIf="!tabarIndex"
      (click)="share()"
      class="footer no-green"
      [ngClass]="{ 'no-green': headerService.user }"
    >
      {{
        headerService.user
          ? "üíö Trae invitados y gana $ cada mes"
          : "Inscr√≠bete e Invita, juntos es mejor!!"
      }}
    </footer> -->
    <app-login-flow
      *ngIf="loginflow"
      [loginEmail]="loginEmail"
      [magicLink]="magicLink"
      [redirectionRoute]="redirectionRoute"
      [redirectionRouteId]="redirectionRouteId"
      [entity]="entity"
      [jsondata]="jsondata"
      (dialogIsOpen)="resetLoginDialog($event)"
    ></app-login-flow>
  <footer class="footer-ganas" *ngIf="showGanas === true" (click)="invite()">
    Invita a comerciantes con tu enlace
    <mat-icon>ios_share</mat-icon>
  </footer>
<qrcode
    style="display: none"
    #qrcode
    [qrdata]="qrdata"
    [elementType]="'img'"
    [width]="500"
    [errorCorrectionLevel]="'M'"
    [allowEmptyString]="true"
    colorDark="#000"
  ></qrcode>
  <!-- </app-navigation> -->