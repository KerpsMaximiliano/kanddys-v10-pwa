<div class="container">
    <header
    class="header"
  >
    <div class="left-area">
      <a>
        <i
          class="fas fa-chevron-left"
          (click)="goToStore()"
        ></i
      ></a>
      <p class="title">
        Art√≠culos a facturarse
        <!-- {{
          headerService.saleflow?.merchant?.name.length < 26
            ? headerService.saleflow?.merchant?.name
            : (headerService.saleflow?.merchant?.name.slice(0, 26) + ".." ||
                "Tienda" | titlecase)
        }} -->
      </p>
    </div>
    <div class="right-area">
      <span class="header-text" *ngIf="logged || headerService.user">
        {{ currentUser?.name || currentUser?.phone || currentUser?.email }}
      </span>
      <!-- <img [src]="env + '/person.svg'" alt="Icono de una persona" /> -->
    </div>
  </header>

  <main>
    <mat-card class="card" *ngFor="let item of items; index as i">
        <div class="card-header flex">
          <div class="left-side flex">
            <div class="featured-image"
            [ngStyle]="{
              backgroundImage: item?.images?.length
                ? 'url(' +
                  item.images[0].value +
                  '), url(https://storage-rewardcharly.sfo2.digitaloceanspaces.com/new-assets/spinner2.gif)'
                : 'url(/assets/images/noimage.png)'
            }"
            (click)="
              item?.images?.length &&
                openImageModal(item.images[0].value)
            "
            ></div>
            <div class="item-quantity">
              <p class="grayout-label">Cantidad</p>
              <div class="quantity">
                <span mat-button class="button" (click)="changeAmount(item._id, 'subtract')">-</span>
                <span>{{ itemObjects[item._id].amount }}</span>
                <span mat-button class="button" (click)="changeAmount(item._id, 'add')">+</span>
              </div>
            </div>
          </div>
          <div class="right-side">
            <p class="grayout-label">${{ item.pricing * itemObjects[item._id].amount | number : "1.2-2" }}</p>
          </div>
        </div>
        <div class="card-body" *ngIf="webformsByItem[item._id]?.webform">
          <div 
            class="section" 
            *ngFor="
              let question of webformsByItem[item._id].webform.questions;
              let i = index
            "
          >
            <p class="section-title grayout-label">{{ question.value }}</p>
            <!-- <p class="section-description">RespuestaID</p> -->
          </div>
        </div>
    </mat-card>

  <!-- TODO: acomodar esto por estilos de verdad -->
  <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>

  </main>

  <footer>
    <div class="form">
      <mat-checkbox class="checkbox">Factura sin comprobante <i class="fas fa-chevron-right"></i></mat-checkbox>
      <br><br>
      <mat-checkbox class="checkbox" >Sin mensaje de regalo <i class="fas fa-chevron-right"></i></mat-checkbox>
    </div>

    <div style="text-align: center;">
      <button mat-button class="cta">Continuar con el pago</button>
    </div>
  </footer>
</div>