<!--<div class="go-to-admin">
  Ir a mi view
</div>-->
<div style="min-height: 100vh">
  <app-provider-info
    [providerId]="merchantName"
    [providerBio1]="merchantSubheadline"
    [providerBio2]="merchantHours"
    [providerImage]="banner"
    [providerSocials]="saleflowData.social"
    [flowId]="flowId"
  ></app-provider-info>

  <!-- <app-page-component-tabs *ngIf="customizersId.length === 0" [tabsOptions]="pagesList"></app-page-component-tabs> -->
  <div
    style="margin-bottom: 60px"
    *ngIf="saleflowData && inputPackage.length > 0 && items.length === 0"
  >
    <ng-container *ngIf="inputPackage.length >= 0 && items.length === 0">
      <div class="header-wrapper">
        <h6
          class="header-text"
          [ngStyle]="{
            fontFamily: 'SfProRegular',
            color: '#7b7b7b',
            fontWeight: 100
          }"
        >
          Mas Vendidos
        </h6>
      </div>
      <div>
        <ng-container *ngIf="visualMode; else swiperMode">
          <div
            class="package-list"
            *ngFor="let item of sliderPackage; let i = index"
          >
            <app-saleflow-item
              [imgURL]="item.images"
              [price]="item.price"
              [description]="item.description"
              [isSelected]="item.selected"
              [priceAlign]="'start'"
              [type]="2"
              (click)="goToPackageDetail(i)"
            >
            </app-saleflow-item>
          </div>
        </ng-container>
        <ng-template #swiperMode>
          <app-swiper
            [saleFlowTwo]="true"
            [selectable]="saleflowData?.canBuyMultipleItems"
            [saleFlowTwoData]="sliderPackage"
            (slideActive)="save($event)"
            (toggleEmitter)="toggleSelected('package', $event)"
          ></app-swiper>
        </ng-template>
      </div>
    </ng-container>

    <ng-container *ngIf="!hasCustomizer && items.length > 0">
      <div class="header-wrapper">
        <h6
          class="header-text"
          [ngStyle]="{
            fontFamily: 'SfProRegular',
            color: '#7b7b7b',
            fontWeight: 100
          }"
        >
          Mas Vendidos
        </h6>
      </div>
      <app-swiper
        [saleFlowTwo]="true"
        [selectable]="saleflowData?.canBuyMultipleItems"
        [saleFlowTwoData]="items"
        (slideActive)="save($event)"
        (toggleEmitter)="toggleSelected('item', $event)"
      ></app-swiper>
    </ng-container>
  </div>
  <div *ngIf="itemsByCategory.length > 0" style="margin-bottom: 30px">
    <div
      *ngFor="let item of itemsByCategory; let i = index"
      [ngStyle]="{ marginBottom: '110px' }"
    >
      <div class="header-wrapper">
        <h6
          class="header-text"
          [ngStyle]="{
            fontFamily: 'SfProRegular',
            color: '#7b7b7b',
            fontWeight: 100
          }"
        >
          {{ item.label }}
        </h6>
        <h6
          class="see-all-more"
          style="font-weight: 100"
          (click)="seeCategories(i)"
        >
          Ver m√°s
        </h6>
      </div>
      <app-swiper
        [saleFlowTwo]="true"
        [saleFlowTwoData]="item.items"
        (slideActive)="onItemCategoryClick(i, $event)"
        (toggleEmitter)="toggleSelected('item', i, $event)"
      ></app-swiper>
    </div>
  </div>
  <section
    style="background-color: white; margin-bottom: 73px"
    *ngIf="itemsByCategory.length === 0 && inputPackage.length === 0"
  >
    <ng-container *ngIf="isCategories; else elseTemplate">
      <div style="padding-top: 10px">
        <app-see-filters
          [type]="3"
          [title]="merchantSubheadline"
          [tags]="closeTagItems"
          (loadingSwiper)="startLoading($event)"
          (eventTags)="filterTags($event)"
          (deletedTag)="tagDeleted($event)"
          [hasBookmark]="true"
        ></app-see-filters>
      </div>
    </ng-container>
    <ng-template #elseTemplate>
      <div class="subheadline">
        {{ merchantSubheadline }}
      </div>
    </ng-template>
    <ng-container *ngIf="items.length > 0">
      <app-item-grid
        [items]="items"
        (eventEmitter)="save($event)"
      ></app-item-grid>
    </ng-container>
    <ng-container *ngIf="items.length === 0">
      <div class="no-results">No se han encontrado resultados...</div>
    </ng-container>
  </section>
</div>

<ng-container *ngIf="saleflowData">
  <ng-container *ngIf="!hasCustomizer; else noCTA">
    <app-sticky-button
      [mode]="canOpenCart ? 'basic' : 'disabled'"
      [text]="
        canOpenCart
          ? 'VER CARRITO DE COMPRAS'
          : saleflowData._id === '61c3b1875c4e7c4f59d256d2'
          ? 'SELECCIONA TU PAQUETE'
          : 'SELECCIONAR'
      "
      (click)="showShoppingCartDialog()"
    ></app-sticky-button>
  </ng-container>
  <ng-template #noCTA>
    <app-sticky-button
      [mode]="'disabled'"
      [text]="'SELECCIONAR'"
    ></app-sticky-button>
  </ng-template>
</ng-container>
