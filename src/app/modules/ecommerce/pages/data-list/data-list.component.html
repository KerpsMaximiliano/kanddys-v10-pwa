<div style="min-height: 100vh;">

    <app-helper-headerv2
    [mode]="mode === 'category' ? 'edit':'options'"
    [navtext]="item && ('Nueva Categoria A '+item.name)"
    [color]="mode === 'category' ? '#E9E371' : ''"
    [returnAble]="true"
    [billId]="'405D $26'"
    [itemId]="'chps n tips'"
    [leftText]="'ingreso $2,020.00'"
    [rightText]="'44 ventas'"
    (returnEvent)="back()"
    ></app-helper-headerv2>

  <div class="input">
    <input
      class="leadword-input"
      (input)="searchKeyword()"
      [(ngModel)]="keyword"
      type="text"
      id="search"
      placeholder="Nombre de la categoria"
    />
  </div>
  
  <p class="label">
    <ng-container *ngIf="!keyword">RECIENTES</ng-container>
    
    <ng-container *ngIf="keyword">
      <ng-container *ngIf="mode === 'tag'">
        <ng-container *ngIf="filteredTagList.length > 0 else noTags">
          RESULTADOS PARECIDOS
        </ng-container>
        <ng-template #noTags>
          <a class="addButton" [routerLink]="['/ecommerce/tags-edit']">
            Añadir Nuevo Tag
          </a>
        </ng-template>
      </ng-container>
      <span class="matches" *ngIf="mode === 'category' && filteredCategories.length > 0">{{filteredCategories.length}} mas coinciden</span>
    </ng-container> 
  </p> 
  <div style="text-align: center;" *ngIf="keyword && mode === 'category' && filteredCategories.length == 0">
    <button class="addButton" (click)="addCategory()">
      Crear este nueva categoria y añadir el item
    </button>
  </div>

  <div class="tag-container" [ngClass]="{'categories': mode === 'category'}">

    <ng-container *ngIf="mode === 'tag'">
    <app-info-card
        *ngFor="let tag of filteredTagList"
        (click)="onTagClick(tag)"
        type="tag"
        [bottomtext]="tag.name"
        [toptext]="tag.counter"
        [isSelectable]="true"
        [selected]="tag.notifyMerchantOrder || tag.notifyUserOrder"
      ></app-info-card>
    </ng-container>

    <ng-container *ngIf="mode === 'category'">
        <app-tags-square
          *ngFor="let category of filteredCategories"
          (click)="onCategoryClick(category)"
          [reverse]="true"
          [position]="'left'"
          [tagText]="category.name"
          [number]="'44 ventas'"
          [color]="category.isSelected ? '#E9E371' : '#2874AD'"
          [textColor]="category.isSelected ? '#E9E371' : '#2874AD'"
          [bColor]="category.isSelected ? '#2874AD' : '#FFFFFF'"
        ></app-tags-square>
    </ng-container>

  </div>

    <app-sticky-button
    [mode]="'fixed'"
    [text]="'SALVA EL ITEM EN categoriaID'"
    ></app-sticky-button>
    
</div>
