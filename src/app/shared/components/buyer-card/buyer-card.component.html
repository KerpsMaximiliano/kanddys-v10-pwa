<div class="container" [ngClass]="{ shadow: shadow }">
  <a
    *ngIf="redirectionParams"
    [routerLink]="redirectionParams.link"
    [queryParams]="redirectionParams.param"
  >
    <ng-container [ngTemplateOutlet]="cardContent"></ng-container>
  </a>
  <ng-container
    *ngIf="!redirectionParams"
    [ngTemplateOutlet]="cardContent"
  ></ng-container>
  <div class="bottom" *ngIf="leftAmount">
    <div
      [ngClass]="{ center: !title && !description }"
      class="amount"
      [ngClass]="{
        hasCartButton: cta
      }"
    >
      <div>
        <p>
          <span>RD$ {{ leftAmount | number }} </span>
          <span *ngIf="rightAmount">- ${{ rightAmount | number }}</span>
          <span *ngIf="viewsCounter" class="views">{{ views }} vistas</span>
        </p>
      </div>
      <button
        class="cart-button"
        [ngClass]="{ active: ctaActive }"
        (click)="emitClick()"
        *ngIf="cta && ctaActive"
      >
        En el carrito
        <!-- <span><img [src]="env + '/carrito_blanco.svg'" alt="" /></span> -->
      </button>
    </div>
  </div>
</div>

<ng-template #cardContent>
  <div class="top">
    <p *ngIf="(title || description) && mode === 'normal'" class="text">
      <span *ngIf="title" class="title">{{ title }}</span
      ><br />
      <br />
      <span *ngIf="description" class="description">{{ description }}</span>
    </p>
    <div class="image-container" *ngIf="mode === 'normal'">
      <img
        class="img"
        #imgContainer
        [src]="img"
        (error)="img = '/assets/images/noimage.png'"
      />
      <!--
        <span class="see-more">Ver detalle</span>
      -->
    </div>

    <div
      *ngIf="mode === 'fullWidth'"
      class="image-container"
      style="width: 100%"
    >
      <img
        class="img full"
        #imgContainer
        [src]="img"
        (error)="img = '/assets/images/noimage.png'"
      />
      <span class="see-more">Ver detalle</span>
    </div>
  </div>
</ng-template>
