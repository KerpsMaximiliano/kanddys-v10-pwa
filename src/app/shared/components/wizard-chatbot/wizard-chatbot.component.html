<div
  class="bubble-button"
  *ngIf="!chatBoxOpened"
  (click)="chatBoxOpened = true"
>
  <img
    src="https://storage-rewardcharly.sfo2.digitaloceanspaces.com/new-assets/hat-wizard-solid.svg"
    alt="wizard"
  />
</div>

<div class="chat-windows" *ngIf="chatBoxOpened">
  <div class="container">
    <div class="questions-and-answers-wrapper">
      <div class="close-button" (click)="chatBoxOpened = false">X</div>

      <ng-container *ngFor="let historyEntry of history">
        <div *ngIf="historyEntry.type === 'QUESTION'" class="question-box">
          <h3>Preguntaste:</h3>
          <p class="content">{{ historyEntry.value }}</p>
        </div>

        <div *ngIf="historyEntry.type === 'ANSWER'" class="answer-box">
          <p>{{ historyEntry.label }}</p>

          <ng-container *ngIf="historyEntry.links">
            <ul>
              <ng-container *ngFor="let link of historyEntry.links">
                <li>
                  <a class="btn" [routerLink]="[link.route]">
                    {{ link.label }}
                  </a>
                </li>
              </ng-container>
            </ul>
          </ng-container>
        </div>

        <div *ngIf="historyEntry.type === 'ERROR'" class="error-box">
          <p class="content">{{ historyEntry.value }}</p>
        </div>
      </ng-container>

      <ng-container *ngIf="history.length === 0">
        <div class="empty">
          <div class="empty-icon">
            <img
              src="https://storage-rewardcharly.sfo2.digitaloceanspaces.com/new-assets/hat-wizard-solid.svg"
              alt="wizard"
            />
          </div>

          <p>
            Escribe algo en la caja de texto y nuestros magos te darán esa
            información
          </p>
        </div>
      </ng-container>
    </div>

    <form class="user-input-area-wrapper" [formGroup]="qaForm">
      <textarea
        class="user-input-box"
        placeholder="Escribe algo..."
        formControlName="input"
      ></textarea>
      <button class="submit-button" (click)="sendQuestion()">
        <img
          src="https://storage-rewardcharly.sfo2.digitaloceanspaces.com/new-assets%2Fsend_black.svg"
          alt="send"
        />
      </button>
    </form>
  </div>
</div>
