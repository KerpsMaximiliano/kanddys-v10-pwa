<div class="dialog-flow"></div>

<div
  class="overlay"
  [ngStyle]="{
    animation:
      status === 'OPEN'
        ? 'darkenOverlay 0.5s ease-in-out 0s 1 normal forwards'
        : 'lightenOverlay 0.5s ease-in-out 0s 1 normal forwards'
  }"
></div>

<div
  class="flow-contents"
  [ngClass]="{
    visible: status === 'OPEN'
  }"
>
  <swiper
    [config]="swiperConfig"
    (slideChange)="changeActiveDialog($event)"
    #dialogSwiper
  >
    <div class="dialog" *ngFor="let dialog of dialogs; index as dialogIndex">
      <div
        class="dialog-overlay"
        [ngClass]="{
          active: currentDialogIndex === dialogIndex,
          notActive: currentDialogIndex !== dialogIndex
        }"
      ></div>

      <div
        class="dynamic-component"
        (click)="tapEvent(dialogIndex)"
        [ngStyle]="{
          width: '82.47%',
          margin: 'auto'
        }"
      >
        <div class="navigation" *ngIf="currentDialogIndex !== dialogIndex">
          <div
            *ngFor="let dialog of dialogs; index as dialogIndex"
            class="current-dialog-indicator"
            [ngClass]="{
              active: currentDialogIndex >= dialogIndex
            }"
          ></div>
        </div>

        <app-dynamic-component
          [component]="dialog.component"
          [componentInputs]="dialog.inputs"
          [componentOutputs]="dialog.outputs"
          [shouldRemoveItFromTheView]="dialog.shouldRerender"
        >
          ></app-dynamic-component
        >
      </div>
    </div>
  </swiper>
</div>
